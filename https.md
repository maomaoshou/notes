

# https协议验证服务器身份的方式

1. 根据浏览器或者说客户端（iOS或者Android）自带的证书链。需要到知名证书机构购买证书

2. 自签名证书。多见于内网使用

3. 自签名证书加上ssl pinning特性。是安全性最高的，但是需要浏览器插件或客户端使用了SSL Pinning特性。即SSL Pinning，即SSL证书绑定，是验证服务器身份的一种方式，是在https协议建立通信时增加的代码逻辑，它通过自己的方式验证服务器身份，然后决定通信是否继续下去。它唯一指定了服务器的身份，所以安全性较高。SSL（安全套接层）和TLS（传输层安全）是为网络通信提供安全及数据完整性的一种安全协议。

# https原理

 1 客户端发起链接请求

 2 服务器接收到请求后，会生成私钥和公钥。并将公钥、证书信息、加密方式等放在一个受保护空间中发给客户端

 3 客户端接收到这个challenge后，服务器验证证书合法性，并处理证书信任

 4 如果服务器证书ok，客户端会随机产生一个对称的key,并用服务器发来的公钥加密这个key，连同客户端证书一并发给服务器

 5 服务器接收到后，校验客户端证书合法性，如果OK，用服务器私钥加密得到客户端发来的key。

 6 服务器将响应数据使用key加密，然后返回给客户端，通讯就正式开始了。



